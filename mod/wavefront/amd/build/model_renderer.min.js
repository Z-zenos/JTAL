function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("mod_wavefront/model_renderer",["exports","mod_wavefront/WebGL","mod_wavefront/three","mod_wavefront/MTLLoader","mod_wavefront/OBJLoader","mod_wavefront/OrbitControls","jquery"],function(a,b,c,d,e,f,g){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=j(b);c=i(c);g=j(g);function h(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;h=function(){return a};return a}function i(a){if(a&&a.__esModule){return a}if(null===a||"object"!==_typeof(a)&&"function"!=typeof a){return{default:a}}var b=h();if(b&&b.has(a)){return b.get(a)}var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a){if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;if(f&&(f.get||f.set)){Object.defineProperty(c,e,f)}else{c[e]=a[e]}}}c.default=a;if(b){b.set(a,c)}return c}function j(a){return a&&a.__esModule?a:{default:a}}var k=[],l=[],m=[],n=[],o=[],p=[],q=[],r=[],s=[],t=[],u=[],v=[],w=window.innerWidth/2,x=window.innerHeight/2,y=function(){n.forEach(function(a,b){a.render(m[b],k[b]);l[b].update()});requestAnimationFrame(y)},z=function(a){if(!b.default.isWebGLAvailable()){var h=b.default.getWebGLErrorMessage();document.getElementById("container").appendChild(h);return!0}console.log(a);a.forEach(function(a){var b=document.getElementById(a);console.log(b);o.push(b);var h=(0,g.default)(b).attr("data-stagewidth");console.log(h);p.push(h);var i=(0,g.default)(b).attr("data-stageheight");console.log(i);q.push(i);var j=(0,g.default)(b).attr("data-backcol");console.log(j);r.push(j);var w=(0,g.default)(b).attr("data-cameraangle");console.log(w);var x=(0,g.default)(b).attr("data-camerafar");console.log(x);var z=(0,g.default)(b).attr("data-camerax");console.log(z);var A=(0,g.default)(b).attr("data-cameray");console.log(A);var B=(0,g.default)(b).attr("data-cameraz");console.log(B);var C=(0,g.default)(b).attr("data-mtl");console.log(C);var D=decodeURIComponent(C);console.log(D);var E=(0,g.default)(b).attr("data-obj");console.log(E);var F=decodeURIComponent(E);console.log(F);var G=new d.MTLLoader;G.load(D,function(a){a.preload();var d=new e.OBJLoader;d.setMaterials(a);d.load(F,function(a){var d=new c.Scene;m.push(d);var e=new c.PerspectiveCamera(+w,h/i,.1,+x);k.push(e);d.add(e);e.position.set(+z,+A,+B);var o=new c.AmbientLight(16777215,1);s.push(o);d.add(o);var p=new c.DirectionalLight(new c.Color("hsl(30, 100%, 75%)"),1);t.push(p);p.position.set(-100,0,100);var q=new c.DirectionalLight(new c.Color("hsl(240, 100%, 75%)"),.75);u.push(q);q.position.set(100,0,100);var r=new c.DirectionalLight(16777215,1);v.push(r);r.position.set(100,0,-100).normalize();d.add(p);d.add(q);d.add(r);d.add(a);d.background=new c.Color(+("0x"+j));var C=new c.WebGLRenderer;C.setPixelRatio(window.devicePixelRatio);C.setSize(h,i);C.setClearColor(new c.Color("hsl(0, 0%, 10%)"));n.push(C);b.appendChild(C.domElement);var D=new f.OrbitControls(e,C.domElement);D.enableDamping=!0;D.dampingFactor=.25;l.push(D);window.addEventListener("keydown",function(a){a.stopPropagation();if("KeyL"===a.code){lighting=!lighting;if(lighting){o.intensity=.25;d.add(p);d.add(q);d.add(r)}else{o.intensity=1;d.remove(p);d.remove(q);d.remove(r)}}},!1);(0,g.default)(b).next().remove();y()})})})};a.init=z});
//# sourceMappingURL=model_renderer.min.js.map
